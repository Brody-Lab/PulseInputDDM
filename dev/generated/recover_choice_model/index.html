<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Fitting a choice model · pulse input DDM</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><nav class="toc"><a href="../../"><img class="logo" src="../../assets/logo.png" alt="pulse input DDM logo"/></a><h1>pulse input DDM</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><span class="toctext">Home</span><ul><li><a class="toctext" href="../../">pulse input DDM</a></li></ul></li><li><span class="toctext">Basics</span><ul><li><a class="toctext" href="../../man/getting_the_package/">Downloading the package</a></li><li><a class="toctext" href="../fit_choice_model/">Loading data and fitting a choice model</a></li><li class="current"><a class="toctext" href>Fitting a choice model</a><ul class="internal"></ul></li><li><a class="toctext" href="../recover_neural_model/">Fitting a neural model</a></li></ul></li><li><span class="toctext">Other helpful info</span><ul><li><a class="toctext" href="../../man/vpn_is_annoying/">Efficient Remote SSH</a></li></ul></li><li><span class="toctext">Development</span><ul><li><a class="toctext" href="../../man/development/">Developing the code</a></li></ul></li><li><span class="toctext">Index</span><ul><li><a class="toctext" href="../../links/">Index</a></li></ul></li><li><span class="toctext">Functions</span><ul><li><a class="toctext" href="../../functions/">Functions</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Basics</li><li><a href>Fitting a choice model</a></li></ul><a class="edit-page" href="https://github.com/Brody-Lab/pulse_input_DDM/blob/master/examples/recover_choice_model.jl"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Fitting a choice model</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Fitting-a-choice-model-1" href="#Fitting-a-choice-model-1">Fitting a choice model</a></h1><p>Blah blah blah</p><pre><code class="language-julia">using pulse_input_DDM</code></pre><h3><a class="nav-anchor" id="Generate-some-data-1" href="#Generate-some-data-1">Generate some data</a></h3><p>Blah blah blah</p><pre><code class="language-julia">θ_syn, data = synthetic_data(;ntrials=10);</code></pre><h3><a class="nav-anchor" id="Optimize-stuff-1" href="#Optimize-stuff-1">Optimize stuff</a></h3><p>Blah blah blah</p><pre><code class="language-julia">n = 53

options = choiceoptions(fit = vcat(trues(9)),
    lb = vcat([0., 8., -5., 0., 0., 0.01, 0.005], [-30, 0.]),
    ub = vcat([2., 30., 5., 100., 2.5, 1.2, 1.], [30, 1.]),
    x0 = vcat([0.1, 15., -0.1, 20., 0.5, 0.8, 0.008], [0.,0.01]))

model = optimize(data, options, n; iterations=5, outer_iterations=1)</code></pre><pre><code class="language-none">(choiceDDM{θchoice{θz{Float64},Float64},Array{choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}},1}}
  θ: θchoice{θz{Float64},Float64}
  data: Array{choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}}((10,))
,  * Status: failure (reached maximum number of iterations)

 * Candidate solution
    Minimizer: [1.09e-01, 1.50e+01, -1.20e-01,  ...]
    Minimum:   5.399683e+00

 * Found with
    Algorithm:     Fminbox with BFGS
    Initial Point: [1.00e-01, 1.50e+01, -1.00e-01,  ...]

 * Convergence measures
    |x - x&#39;|               = 8.44e-01 ≰ 1.0e-10
    |x - x&#39;|/|x&#39;|          = 3.37e-02 ≰ 0.0e+00
    |f(x) - f(x&#39;)|         = 2.38e+00 ≰ 1.0e-06
    |f(x) - f(x&#39;)|/|f(x&#39;)| = 4.41e-01 ≰ 0.0e+00
    |g(x)|                 = 2.87e+00 ≰ 1.0e-03

 * Work counters
    Seconds run:   4  (vs limit Inf)
    Iterations:    1
    f(x) calls:    27
    ∇f(x) calls:   6
)</code></pre><h3><a class="nav-anchor" id="Compute-Hessian-and-the-confidence-interavls-1" href="#Compute-Hessian-and-the-confidence-interavls-1">Compute Hessian and the confidence interavls</a></h3><p>Blah blah blah</p><pre><code class="language-">H = Hessian(model, n)
CI, HPSD = CIs(H);
nothing #hide</code></pre><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p><footer><hr/><a class="previous" href="../fit_choice_model/"><span class="direction">Previous</span><span class="title">Loading data and fitting a choice model</span></a><a class="next" href="../recover_neural_model/"><span class="direction">Next</span><span class="title">Fitting a neural model</span></a></footer></article></body></html>
