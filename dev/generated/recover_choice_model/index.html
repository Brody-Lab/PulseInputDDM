<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>- · pulse input DDM</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><nav class="toc"><a href="../../"><img class="logo" src="../../assets/logo.png" alt="pulse input DDM logo"/></a><h1>pulse input DDM</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><span class="toctext">Home</span><ul><li><a class="toctext" href="../../">pulse input DDM</a></li></ul></li><li><span class="toctext">Basics</span><ul><li><a class="toctext" href="../../man/getting_the_package/">Getting started</a></li><li><a class="toctext" href="../../man/choice_observation_model/">Fitting the model to choices</a></li><li><a class="toctext" href="../../man/neural_observation_model/">Fitting the model to neural activity</a></li><li class="current"><a class="toctext" href>-</a><ul class="internal"></ul></li></ul></li><li><span class="toctext">Other helpful info</span><ul><li><a class="toctext" href="../../man/vpn_is_annoying/">Efficient Remote SSH</a></li></ul></li><li><span class="toctext">Development</span><ul><li><a class="toctext" href="../../man/development/">Developing the code</a></li></ul></li><li><span class="toctext">Index</span><ul><li><a class="toctext" href="../../links/">Index</a></li></ul></li><li><span class="toctext">Functions</span><ul><li><a class="toctext" href="../../functions/">Functions</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Basics</li><li><a href>-</a></li></ul><a class="edit-page" href="https://github.com/Brody-Lab/pulse_input_DDM/blob/master/examples/recover_choice_model.jl"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>-</span><a class="fa fa-bars" href="#"></a></div></header><h3><a class="nav-anchor" id="Fitting-a-choice-model-1" href="#Fitting-a-choice-model-1">Fitting a choice model</a></h3><p>Blah blah blah</p><pre><code class="language-julia">using pulse_input_DDM</code></pre><h3><a class="nav-anchor" id="Geneerate-some-data-1" href="#Geneerate-some-data-1">Geneerate some data</a></h3><p>Blah blah blah</p><pre><code class="language-julia">θ_syn, data = synthetic_data(;ntrials=10)</code></pre><pre><code class="language-none">(θchoice{θz{Float64},Float64}
  θz: θz{Float64}
  bias: Float64 1.0
  lapse: Float64 0.05
, choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}[choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}
  click_data: pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}
  choice: Bool false
, choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}
  click_data: pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}
  choice: Bool false
, choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}
  click_data: pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}
  choice: Bool false
, choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}
  click_data: pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}
  choice: Bool false
, choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}
  click_data: pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}
  choice: Bool false
, choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}
  click_data: pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}
  choice: Bool false
, choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}
  click_data: pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}
  choice: Bool false
, choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}
  click_data: pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}
  choice: Bool false
, choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}
  click_data: pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}
  choice: Bool false
, choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}
  click_data: pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}
  choice: Bool true
])</code></pre><h3><a class="nav-anchor" id="Optimize-stuff-1" href="#Optimize-stuff-1">Optimize stuff</a></h3><p>Blah blah blah</p><pre><code class="language-julia">n = 53

options = choiceoptions(fit = vcat(trues(9)),
    lb = vcat([0., 8., -5., 0., 0., 0.01, 0.005], [-30, 0.]),
    ub = vcat([2., 30., 5., 100., 2.5, 1.2, 1.], [30, 1.]),
    x0 = vcat([0.1, 15., -0.1, 20., 0.5, 0.8, 0.008], [0.,0.01]))

model = optimize(data, options, n; iterations=5, outer_iterations=1)</code></pre><pre><code class="language-none">choiceDDM{θchoice{θz{Float64},Float64},Array{choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}},1}}
  θ: θchoice{θz{Float64},Float64}
  data: Array{choicedata{pulse_input_DDM.choiceinputs{pulse_input_DDM.clicks,pulse_input_DDM.binned_clicks}}}((10,))
</code></pre><h3><a class="nav-anchor" id="Compute-Hessian-1" href="#Compute-Hessian-1">Compute Hessian</a></h3><p>Blah blah blah</p><pre><code class="language-julia">H = Hessian(model, n)</code></pre><pre><code class="language-none">9×9 Array{Float64,2}:
 -0.148536      0.00164825   …    0.146897    0.01292    -0.0282253
  0.00164825   -0.00725644       -0.0342737   0.0107845  -0.0136015
  0.0127539    -0.00314708       -0.422128    0.0617988  -0.16416  
 -0.000696991   0.000959521       0.0735516   0.0032802  -0.0163298
 -0.0262068     0.028571          1.36515     0.189946   -0.548638 
 -0.201851      0.0273222    …  -21.4214      0.536942   -0.414745 
  0.146897     -0.0342737         8.46919    -0.432463   -0.353418 
  0.01292       0.0107845        -0.432463    0.0900179   0.700933 
 -0.0282253    -0.0136015        -0.353418    0.700933    1.68873  </code></pre><h3><a class="nav-anchor" id="Get-the-CIs-from-the-Hessian-1" href="#Get-the-CIs-from-the-Hessian-1">Get the CIs from the Hessian</a></h3><p>Blah blah blah</p><pre><code class="language-julia">CI, HPSD = CIs(model, H)</code></pre><pre><code class="language-none">([5.3093784620210505, 64.87832283661429, 16.700985493194985, 158.60858441969194, 4.771217270594058, 0.8843025168808715, 0.6804116347667057, 13.463053511253268, 2.9629522898726646], [0.1485356245664418 -0.001648248555134304 … -0.012920046040730989 0.028225260657907116; -0.001648248555134304 0.007256437023448183 … -0.010784483111582319 0.01360152917759916; … ; -0.012920046040730989 -0.010784483111582319 … 0.30183297807535553 0.13408917288829655; 0.028225260657907116 0.01360152917759916 … 0.13408917288829655 4.532273925611883])</code></pre><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p><footer><hr/><a class="previous" href="../../man/neural_observation_model/"><span class="direction">Previous</span><span class="title">Fitting the model to neural activity</span></a><a class="next" href="../../man/vpn_is_annoying/"><span class="direction">Next</span><span class="title">Efficient Remote SSH</span></a></footer></article></body></html>
