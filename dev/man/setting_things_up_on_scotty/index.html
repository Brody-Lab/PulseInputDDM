<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Preliminaries to fitting the model interactively on scotty · pulse input DDM</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><nav class="toc"><a href="../../index.html"><img class="logo" src="../../assets/logo.png" alt="pulse input DDM logo"/></a><h1>pulse input DDM</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Basics</span><ul><li class="current"><a class="toctext" href>Preliminaries to fitting the model interactively on scotty</a><ul class="internal"><li><a class="toctext" href="#Installing-Julia-via-anaconda-1">Installing Julia via anaconda</a></li><li><a class="toctext" href="#Installing-the-IJulia-package-1">Installing the IJulia package</a></li><li><a class="toctext" href="#Opening-a-notebook-on-scotty-and-creating-a-SSH-tunnel-1">Opening a notebook on scotty and creating a SSH tunnel</a></li><li><a class="toctext" href="#Now-that-everything&#39;s-set-up,-how-do-I-open-a-notebook-*again*?-1">Now that everything&#39;s set up, how do I open a notebook <em>again</em>?</a></li><li><a class="toctext" href="#Running-interactively-on-spock-brody-instead-1">Running interactively on spock-brody instead</a></li></ul></li><li><a class="toctext" href="../getting_the_package/">Getting the pulse input DDM package from GitHub</a></li><li><a class="toctext" href="../working_interactively_on_scotty/">Working interactively on scotty via a SSH tunnel</a></li><li><a class="toctext" href="../choice_observation_model/">Fitting a model to choices</a></li><li><a class="toctext" href="../neural_observation_model/">Fitting a model to neural activity</a></li><li><a class="toctext" href="../using_spock/">Using spock</a></li></ul></li><li><span class="toctext">Other helpful info</span><ul><li><a class="toctext" href="../vpn_is_annoying/">Efficient Remote SSH</a></li></ul></li><li><a class="toctext" href="../development/">Development</a></li><li><a class="toctext" href="../../links/">Index</a></li><li><a class="toctext" href="../../functions/">Functions</a></li></ul></nav><article id="docs"><header><nav><ul><li>Basics</li><li><a href>Preliminaries to fitting the model interactively on scotty</a></li></ul><a class="edit-page" href="https://github.com/PrincetonUniversity/pulse_input_DDM/blob/master/docs/src/man/setting_things_up_on_scotty.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Preliminaries to fitting the model interactively on scotty</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Preliminaries-to-fitting-the-model-interactively-on-scotty-1" href="#Preliminaries-to-fitting-the-model-interactively-on-scotty-1">Preliminaries to fitting the model interactively on scotty</a></h1><p>First you need to install Julia in your scotty user directory via anaconda. This will be a <em>whole new installation of Julia</em> (not the installation you might normally use on scotty if you typed <code>module load julia</code>) which means if you&#39;ve used another installation of Julia on scotty before, all the packages you might have added won&#39;t be there. Using a new anaconda installation of Julia allows easier use of Jupyter notebooks via a SSH tunnel. </p><h2><a class="nav-anchor" id="Installing-Julia-via-anaconda-1" href="#Installing-Julia-via-anaconda-1">Installing Julia via anaconda</a></h2><p>From your local machine, make a ssh connection with scotty, </p><pre><code class="language-none">    &gt;&gt; ssh [username]@scotty.princeton.edu</code></pre><p>where <code>[username]</code> is your scotty username, assuming you have one. If you do not have a username email <a href="man/mailto:pnihelp@princeton.edu">PNI help</a>.</p><p>(If you haven&#39;t configured your local machine so that you can avoid using the VPN to access scotty, do that first. Instructions are provided on the <a href="../vpn_is_annoying/#Efficient-Remote-SSH-1">Efficient Remote SSH</a> page.)</p><p>Next load an anaconda module on scotty (for example, 5.1.0), </p><pre><code class="language-none">    &gt;&gt; module load anacondapy/5.1.0</code></pre><p>Presently, you are using the &quot;base&quot; anaconda environment, for which PNI users do not have write privileges. You need to create a new environment, which we will call &quot;Julia&quot;,</p><pre><code class="language-none">    &gt;&gt; conda create --name julia</code></pre><p>Now that you&#39;ve created this new environment, you need to &quot;activate&quot; it, </p><pre><code class="language-none">    &gt;&gt; source activate julia</code></pre><p>Next, you need to install Julia within this environment via <a href="https://anaconda.org/conda-forge/julia">anaconda</a>, </p><pre><code class="language-none">    &gt;&gt; conda install -c conda-forge julia</code></pre><p>You are using a <em>whole new version of Julia</em> (<em>not</em> the one you use when you execute <code>module load julia</code> on scotty or spock), so you will need to re-install lots of packages (if you have used Julia on scotty or spock before), most specifically, the IJulia package so you can use Julia in a Jupyter notebook.</p><h2><a class="nav-anchor" id="Installing-the-IJulia-package-1" href="#Installing-the-IJulia-package-1">Installing the IJulia package</a></h2><p>Once, Julia is installed, you can launch it by typing <code>julia</code>. From here, you need to add the IJulia package so you can use Julia in a notebook. In Julia 1.0, you can access the &quot;package manager&quot; by pressing <code>]</code>. From there, enter</p><pre><code class="language-none">    (v1.0) pkg &gt; add IJulia</code></pre><p>You might now want to add any packages you use, again in the normal way (for example, you can now add the pulse_input_DDM package, as we will do eventually, described in the <a href="../getting_the_package/#Getting-the-pulse-input-DDM-package-from-GitHub-1">Getting the pulse input DDM package from GitHub</a> section). You&#39;re done (with this part)! You can exit Julia.</p><h2><a class="nav-anchor" id="Opening-a-notebook-on-scotty-and-creating-a-SSH-tunnel-1" href="#Opening-a-notebook-on-scotty-and-creating-a-SSH-tunnel-1">Opening a notebook on scotty and creating a SSH tunnel</a></h2><p>Now, that Julia is all set up, you need to launch a Jupyter notebook on scotty (which is possible because you&#39;re already using the anaconda module, which contains jupyter). In your ssh connection to scotty, type </p><pre><code class="language-none">    &gt;&gt; jupyter notebook</code></pre><p>Once this has executed, it will pick a port on which to run and provide you a url so that you can launch the notebook in your local browser. But before you can do that, you need to create a &quot;ssh tunnel&quot; from the open port on scotty and a port on your local machine. <em>In a separate terminal window</em>, create a <em>new</em> ssh connection to scotty, but one that will map the ports, </p><pre><code class="language-none">    &gt;&gt; ssh -L &lt;port&gt;:localhost:&lt;port&gt; [username]@scotty.princeton.edu</code></pre><p>where <code>&lt;port&gt;</code> is the port assigned by scotty, and the second <code>&lt;port&gt;</code> is one on your local machine (you can pick the same one that scotty did, if you don&#39;t happen to be already using it).</p><p>Now, copy the url that was created when you launched the jupyter notebook into your local browser, and voila! On a mac, you can press the &quot;command&quot; key (⌘), and the url should become underlined, at which point you can click on it with the  mouse and the link should open in your local browser.</p><p>Here is a screen shot of what a typical terminal will look like, showing the url (at the bottom) that needs to be copied and pasted or clicked on:</p><p><img src="assets/notebook-screen-shot.png" alt="notebook-screen-shot"/></p><h2><a class="nav-anchor" id="Now-that-everything&#39;s-set-up,-how-do-I-open-a-notebook-*again*?-1" href="#Now-that-everything&#39;s-set-up,-how-do-I-open-a-notebook-*again*?-1">Now that everything&#39;s set up, how do I open a notebook <em>again</em>?</a></h2><p>Next time, you only need to:</p><ul><li>SSH into scotty: <code>&gt;&gt; ssh scotty</code>.</li><li>Load the anaconda module: <code>&gt;&gt; module load anacondapy/5.1.0</code>.</li><li>Activate the julia environment: <code>&gt;&gt; source activate julia</code>.</li><li>Launch a jupyter notebook: <code>&gt;&gt; jupyter notebook</code>.</li><li>Create the ssh tunnel: <code>&gt;&gt; ssh -L &lt;port&gt;:localhost:&lt;port&gt; scotty</code>.</li></ul><p>These instructions can also be found <a href="https://brodylabwiki.princeton.edu/wiki/index.php/Internal:IJulia_notebook_on_scotty">here</a>.</p><h2><a class="nav-anchor" id="Running-interactively-on-spock-brody-instead-1" href="#Running-interactively-on-spock-brody-instead-1">Running interactively on spock-brody instead</a></h2><p>I&#39;m not sure if this is technically supported by PNI IT or not, but sometimes scotty can be bogged down with lots of jobs. Our personal computing cluster that PNI manages is mostly set up for batch jobs (like spock) but can be hyjacked to run interactively by executing the following from spock (once you made a SSH connection to it):</p><pre><code class="language-none">    &gt;&gt; salloc -p Brody -t 24:00:00 -c 44 srun --pty bash</code></pre><p>This will request 1 node (44 cores) for 24 hours from the Brody partition. The second bit <code>srun --pty bash</code> will open a bash shell on the compute node you just requested. You can now use it like you used scotty above. </p><footer><hr/><a class="previous" href="../../"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../getting_the_package/"><span class="direction">Next</span><span class="title">Getting the pulse input DDM package from GitHub</span></a></footer></article></body></html>
